<DOCTYPE html>
<html>
    <head>
        <title>
            {% if current_song %}
            {{ current_song.artist }} - {{ current_song.title }} |
            {% endif %}
            Playa
        </title>
        <link rel="stylesheet" media="screen" href="{{ url_for('static', filename='playa.css') }}"/>
        <script src="{{ url_for('static', filename='jquery.js') }}"></script>
    </head>
    <body>
        <div id="container">
            <div class="clearfix">
                {% if not player.is_ready() %}
                    <p>Please wait while Playa loads...</p>
                {% else %}
                    <p><a href="{{ url_for('index') }}">Home</a> | <a href="{{ url_for('artists') }}">Artists</a> | <a href="{{ url_for('genres') }}">Genres</a> | <a href="{{ url_for('search') }}">Search</a></p>
                    <div id="now-playing">
                        <div class="song-action">
                            {% if player.is_playing() %}
                                <a href="{{ url_for('stop_playing') }}" class="pause-button">Pause</a>
                            {% else %}
                                <a href="{{ url_for('start_playing') }}" class="play-button">Play</a>
                            {% endif %}
                        </div>
                        {% if current_song %}
                            <div class="song-name">{{ current_song.artist }} - {{ current_song.title }}</div>
                            <div class="song-pos">-{{ (player.get_song_pos()[1] - player.get_song_pos()[0])|duration }}</div>
                            <div class="song-album">{{ current_song.album }}</div>
                            <div class="progress-bar">
                                <div style="width: {{ player.get_song_pos()[0] / player.get_song_pos()[1] * 100 }}%"></div>
                            </div>
                        {% else %}
                            <div class="song-name"></div>
                            <div class="song-pos"></div>
                            <div class="song-album"></div>
                            <div class="progress-bar">
                                <div style="width:0"></div>
                            </div>
                        {% endif %}
                    </div>
                    {% block body %}{% endblock %}
                {% endif %}
            </div>
        </div>
        <div id="footer">
            <div class="container">
                Playa | Conjured up by the <a href="http://code.disqus.com">DISQUS</a> team and other noble <a href="https://github.com/disqus/playa/contributors">sorcerers</a>.
            </div>
        </div>
        <script>
        $('#results tbody tr').click(function(){
            var $cbx = $(this).find('input[type=checkbox]');
            $cbx.attr('checked', !$cbx.is(':checked'));
        });
        $('#results thead input[type=checkbox]').change(function(){
            var $this = $(this);
            $('#results tbody tr input[type=checkbox]').attr('checked', $this.is(':checked'));
        });
        </script>
    </body>
</html>